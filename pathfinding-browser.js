(function(e){if("function"==typeof bootstrap)bootstrap("pf",e);else if("object"==typeof exports)module.exports=e();else if("function"==typeof define&&define.amd)define(e);else if("undefined"!=typeof ses){if(!ses.ok())return;ses.makePF=e}else"undefined"!=typeof window?window.PF=e():global.PF=e()})(function(){var e={};e.VERSION="0.4.2";var t=function(e,t,n){this.x=e;this.y=t;this.walkable=void 0===n?!0:n};var n=function(e,t){this.grid=e;this.heuristic=t||n.manhattan;this.diagonalMovement=1};n.manhattan=function(e,t){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)};n.euclidean=function(e,t){var n=e.x-t.x,r=e.y-t.y;return Math.sqrt(n*n+r*r)};n.chebyshev=function(e,t){return Math.max(Math.abs(e.x-t.x),Math.abs(e.y-t.y))};n.octile=function(e,t){var n=Math.abs(e.x-t.x),r=Math.abs(e.y-t.y);return 1.414213562373095*Math.min(n,r)+Math.abs(n-r)};n.prototype.findPath=function(e,t,n,r,i){var s,o,u,a,f,l,c,h,p=i.getNodeAt(e,t),d=i.getNodeAt(n,r),v=this.heuristic,m=this.diagonalMovement;for(p.g=0,p.f=0,p.opened=!0;!p.closed;){if(p.closed)continue;u=p.g;a=i.getNeighbors(p,m);for(f=0,l=a.length;f<l;++f){o=a[f];if(o.closed)continue;if(o===d)return o.parent=p,o.path();s=o.x-p.x;c=o.y-p.y;h=s===0||c===0?u+1:u+1.414213562373095;if(!o.opened||h<o.g){o.g=h;o.h=o.h||v(o,d);o.f=o.g+o.h;o.parent=p;if(!o.opened)p.push(o),o.opened=!0;else p.updateItem(o)}}p.closed=!0;if(p.size()===0)return[];p=p.pop()}return[]};var r=function(e){this.width=e.width;this.height=e.height;this.nodes=this._buildNodes(e.width,e.height,e.matrix)};r.prototype._buildNodes=function(e,n,r){var i,s,o=[],u;r=r||[];for(i=0;i<n;++i){o[i]=[];for(s=0;s<e;++s)u=void 0,r[i]&&r[i][s]&&(u=r[i][s]),o[i][s]=new t(s,i,u)}return o};r.prototype.getNodeAt=function(e,t){return this.nodes[t][e]};r.prototype.isWalkableAt=function(e,t){return this.isInside(e,t)&&this.nodes[t][e].walkable};r.prototype.isInside=function(e,t){return e>=0&&e<this.width&&t>=0&&t<this.height};r.prototype.setWalkableAt=function(e,t,n){this.nodes[t][e].walkable=n};r.prototype.getNeighbors=function(e,t){var n=e.x,r=e.y,i=[],s,o,u,a,f,l,c,h;s=!this.isWalkableAt(n,r-1);o=!this.isWalkableAt(n+1,r);u=!this.isWalkableAt(n,r+1);a=!this.isWalkableAt(n-1,r);if(t===1){f=s||o;l=o||u;c=u||a;h=a||s}else if(t===2)f=s&&o,l=o&&u,c=u&&a,h=a&&s;else if(t===3)f=s&&o,l=o&&u,c=u&&a,h=a&&s;s&&i.push(this.nodes[r-1][n]);o&&i.push(this.nodes[r][n+1]);u&&i.push(this.nodes[r+1][n]);a&&i.push(this.nodes[r][n-1]);if(t===0)return i;f||this.isWalkableAt(n+1,r-1)&&i.push(this.nodes[r-1][n+1]);l||this.isWalkableAt(n+1,r+1)&&i.push(this.nodes[r+1][n+1]);c||this.isWalkableAt(n-1,r+1)&&i.push(this.nodes[r+1][n-1]);h||this.isWalkableAt(n-1,r-1)&&i.push(this.nodes[r-1][n-1]);return i};r.prototype.clone=function(){var e=this.width,n=this.height,i=this.nodes,s,o,u,a=new r({width:e,height:n});for(s=0;s<n;++s)for(o=0;o<e;++o)u=i[s][o],a.nodes[s][o]=new t(u.x,u.y,u.walkable);return a};var i=function(){this.x=0;this.y=0;this.walkable=true};i.prototype=new t(0,0);i.prototype.path=function(){var e=this,t=[];while(e.parent){t.push(e);e=e.parent}return t.reverse()};t.prototype.push=function(){};t.prototype.pop=function(){};t.prototype.size=function(){};t.prototype.updateItem=function(){};var s=function(e){e=e||{};this.allowDiagonal=e.allowDiagonal;this.dontCrossCorners=e.dontCrossCorners;this.heuristic=e.heuristic||n.manhattan;this.weight=e.weight||1};s.prototype=new n;s.prototype.constructor=s;s.prototype.findPath=function(e,t,r,i,s){var o,u,a,f,l,c,h,p,d,v=s.getNodeAt(e,t),m=s.getNodeAt(r,i),g=this.heuristic,y=this.allowDiagonal,b=this.dontCrossCorners,w=this.weight,E=[],S=s.width,x=s.height,T;for(T=0;T<x;T++)E[T]=[],E[T].length=S;v.g=0;v.f=0;E[t][e]=v;for(v.opened=!0;!v.closed;){if(v.closed)continue;f=v.g;o=s.getNeighbors(v,y,b);for(c=0,h=o.length;c<h;++c){u=o[c];if(u.closed)continue;a=u.x;p=u.y;l=u.walkable?f+1:f;if(E[p]&&E[p][a]){d=E[p][a];if(l>=d.g)continue}else d=E[p][a]=new i(a,p);d.g=l;d.h=d.h||w*g(Math.abs(a-r),Math.abs(p-i));d.f=d.g+d.h;d.parent=v;if(!d.opened)v.push(d),d.opened=!0;else v.updateItem(d)}v.closed=!0;if(v.size()===0)return[];v=v.pop()}return[]};e.Node=t;e.Grid=r;e.Heuristic=n;e.AStarFinder=s;return e});
